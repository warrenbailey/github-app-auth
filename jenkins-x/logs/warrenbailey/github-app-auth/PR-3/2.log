
Showing logs for build [32mwarrenbailey-github-app-auth-pr-g77ql-2[0m stage [32mfrom-build-pack[0m and container [32mstep-credential-initializer-m89c9[0m
{"level":"warn","ts":1569252825.6745746,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/master\" is not a valid GitHub commit ID"}
{"level":"info","ts":1569252825.6755638,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mwarrenbailey-github-app-auth-pr-g77ql-2[0m stage [32mfrom-build-pack[0m and container [32mstep-working-dir-initializer-6xmvv[0m
{"level":"warn","ts":1569252826.0211344,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1569252826.0223339,"logger":"fallback-logger","caller":"bash/main.go:65","msg":"Successfully executed command \"mkdir -p /workspace/source /workspace/source/charts/preview\""}

Showing logs for build [32mwarrenbailey-github-app-auth-pr-g77ql-2[0m stage [32mfrom-build-pack[0m and container [32mstep-place-tools[0m

Showing logs for build [32mwarrenbailey-github-app-auth-pr-g77ql-2[0m stage [32mfrom-build-pack[0m and container [32mstep-git-source-warrenbailey-github-app-auth-pr-pm26c[0m
{"level":"warn","ts":1569252834.1176338,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/master\" is not a valid GitHub commit ID"}
{"level":"info","ts":1569252834.4110398,"logger":"fallback-logger","caller":"git/git.go:102","msg":"Successfully cloned https://github.com/warrenbailey/github-app-auth.git @ fe085dfb75ffdb8a8a8906ab079ae3b077477b8d in path /workspace/source"}

Showing logs for build [32mwarrenbailey-github-app-auth-pr-g77ql-2[0m stage [32mfrom-build-pack[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:781d0a1d39563244d7052a273502464758894505,3:fe085dfb75ffdb8a8a8906ab079ae3b077477b8d
DEBUG: ran git fetch --unshallow origin fe085dfb75ffdb8a8a8906ab079ae3b077477b8d: 781d0a1d39563244d7052a273502464758894505: in 
DEBUG: ran git checkout master in 
DEBUG: ran git reset --hard 781d0a1d39563244d7052a273502464758894505 in 
DEBUG: ran clean --force -d . in 
DEBUG: ran git merge fe085dfb75ffdb8a8a8906ab079ae3b077477b8d in 
Merged SHA fe085dfb75ffdb8a8a8906ab079ae3b077477b8d with commit message 'Bump werkzeug from 0.14.1 to 0.15.3' into base branch master

Showing logs for build [32mwarrenbailey-github-app-auth-pr-g77ql-2[0m stage [32mfrom-build-pack[0m and container [32mstep-build-python-unittest[0m

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK

Showing logs for build [32mwarrenbailey-github-app-auth-pr-g77ql-2[0m stage [32mfrom-build-pack[0m and container [32mstep-build-container-build[0m
ERROR: logging before flag.Parse: E0923 15:33:56.642810      10 metadata.go:241] Failed to unmarshal scopes: invalid character 'h' looking for beginning of value
[36mINFO[0m[0000] Downloading base image python:onbuild        
ERROR: logging before flag.Parse: E0923 15:33:56.834253      10 metadata.go:142] while reading 'google-dockercfg' metadata: http status code: 404 while fetching url http://metadata.google.internal./computeMetadata/v1/instance/attributes/google-dockercfg
ERROR: logging before flag.Parse: E0923 15:33:56.836627      10 metadata.go:159] while reading 'google-dockercfg-url' metadata: http status code: 404 while fetching url http://metadata.google.internal./computeMetadata/v1/instance/attributes/google-dockercfg-url
2019/09/23 15:33:56 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0000] Error while retrieving image from cache: getting file info: stat /workspace/sha256:43780a8431c53f4afd734ad795e03127c0c607337a60639c5903a51a03535c22: no such file or directory 
[36mINFO[0m[0000] Downloading base image python:onbuild        
2019/09/23 15:33:57 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0001] Executing 3 build triggers                   
[36mINFO[0m[0001] Using files from context: [/workspace/source/requirements.txt] 
[36mINFO[0m[0001] Checking for cached layer gcr.io/cb-aps-poc-consumer-wb2/cache:881485f5dc35e5b28c1b44c3d1494f7bbbf559ebfac3be20a7f15eb45161a1c3... 
[36mINFO[0m[0001] No cached layer found for cmd RUN pip install --no-cache-dir -r requirements.txt 
[36mINFO[0m[0001] Unpacking rootfs as cmd RUN pip install --no-cache-dir -r requirements.txt requires it. 
[36mINFO[0m[0016] Taking snapshot of full filesystem...        
[36mINFO[0m[0023] Using files from context: [/workspace/source/requirements.txt] 
[36mINFO[0m[0023] COPY requirements.txt /usr/src/app/          
[36mINFO[0m[0023] Taking snapshot of files...                  
[36mINFO[0m[0023] RUN pip install --no-cache-dir -r requirements.txt 
[36mINFO[0m[0023] cmd: /bin/sh                                 
[36mINFO[0m[0023] args: [-c pip install --no-cache-dir -r requirements.txt] 
Collecting Click==7.0 (from -r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/fa/37/45185cb5abbc30d7257104c434fe0b07e5a195a6847506c074527aa599ec/Click-7.0-py2.py3-none-any.whl (81kB)
Collecting Flask==1.0.2 (from -r requirements.txt (line 2))
  Downloading https://files.pythonhosted.org/packages/7f/e7/08578774ed4536d3242b14dacb4696386634607af824ea997202cd0edb4b/Flask-1.0.2-py2.py3-none-any.whl (91kB)
Collecting itsdangerous==1.1.0 (from -r requirements.txt (line 3))
  Downloading https://files.pythonhosted.org/packages/76/ae/44b03b253d6fade317f32c24d100b3b35c2239807046a4c953c7b89fa49e/itsdangerous-1.1.0-py2.py3-none-any.whl
Collecting Jinja2==2.10 (from -r requirements.txt (line 4))
  Downloading https://files.pythonhosted.org/packages/7f/ff/ae64bacdfc95f27a016a7bed8e8686763ba4d277a78ca76f32659220a731/Jinja2-2.10-py2.py3-none-any.whl (126kB)
Collecting MarkupSafe==1.1.0 (from -r requirements.txt (line 5))
  Downloading https://files.pythonhosted.org/packages/08/04/f2191b50fb7f0712f03f064b71d8b4605190f2178ba02e975a87f7b89a0d/MarkupSafe-1.1.0-cp36-cp36m-manylinux1_x86_64.whl
Collecting Werkzeug==0.15.3 (from -r requirements.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/3d/bf/79101bd1d6a2b3fe0888e8d6e039800b173f26b7388308fc4bcc45de8d0a/Werkzeug-0.15.3-py2.py3-none-any.whl (327kB)
Collecting requests==2.22.0 (from -r requirements.txt (line 7))
  Downloading https://files.pythonhosted.org/packages/51/bd/23c926cd341ea6b7dd0b2a00aba99ae0f828be89d72b2190f27c11d4b7fb/requests-2.22.0-py2.py3-none-any.whl (57kB)
Collecting kubernetes==10.0.1 (from -r requirements.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/6e/fc/2cab119f679648b348b8940de0dd744a1f0ee99c690aa2ef6072f050816c/kubernetes-10.0.1-py2.py3-none-any.whl (1.5MB)
Collecting urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 (from requests==2.22.0->-r requirements.txt (line 7))
  Downloading https://files.pythonhosted.org/packages/81/b7/cef47224900ca67078ed6e2db51342796007433ad38329558f56a15255f5/urllib3-1.25.5-py2.py3-none-any.whl (125kB)
Collecting certifi>=2017.4.17 (from requests==2.22.0->-r requirements.txt (line 7))
  Downloading https://files.pythonhosted.org/packages/18/b0/8146a4f8dd402f60744fa380bc73ca47303cccf8b9190fd16a827281eac2/certifi-2019.9.11-py2.py3-none-any.whl (154kB)
Collecting chardet<3.1.0,>=3.0.2 (from requests==2.22.0->-r requirements.txt (line 7))
  Downloading https://files.pythonhosted.org/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl (133kB)
Collecting idna<2.9,>=2.5 (from requests==2.22.0->-r requirements.txt (line 7))
  Downloading https://files.pythonhosted.org/packages/14/2c/cd551d81dbe15200be1cf41cd03869a46fe7226e7450af7a6545bfc474c9/idna-2.8-py2.py3-none-any.whl (58kB)
Collecting requests-oauthlib (from kubernetes==10.0.1->-r requirements.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/c2/e2/9fd03d55ffb70fe51f587f20bcf407a6927eb121de86928b34d162f0b1ac/requests_oauthlib-1.2.0-py2.py3-none-any.whl
Collecting six>=1.9.0 (from kubernetes==10.0.1->-r requirements.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/73/fb/00a976f728d0d1fecfe898238ce23f502a721c0ac0ecfedb80e0d88c64e9/six-1.12.0-py2.py3-none-any.whl
Collecting websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 (from kubernetes==10.0.1->-r requirements.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/29/19/44753eab1fdb50770ac69605527e8859468f3c0fd7dc5a76dd9c4dbd7906/websocket_client-0.56.0-py2.py3-none-any.whl (200kB)
Collecting google-auth>=1.0.1 (from kubernetes==10.0.1->-r requirements.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/c5/9b/ed0516cc1f7609fb0217e3057ff4f0f9f3e3ce79a369c6af4a6c5ca25664/google_auth-1.6.3-py2.py3-none-any.whl (73kB)
Requirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes==10.0.1->-r requirements.txt (line 8)) (39.2.0)
Collecting python-dateutil>=2.5.3 (from kubernetes==10.0.1->-r requirements.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/41/17/c62faccbfbd163c7f57f3844689e3a78bae1f403648a6afb1d0866d87fbb/python_dateutil-2.8.0-py2.py3-none-any.whl (226kB)
Collecting pyyaml>=3.12 (from kubernetes==10.0.1->-r requirements.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/e3/e8/b3212641ee2718d556df0f23f78de8303f068fe29cdaa7a91018849582fe/PyYAML-5.1.2.tar.gz (265kB)
Collecting oauthlib>=3.0.0 (from requests-oauthlib->kubernetes==10.0.1->-r requirements.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/05/57/ce2e7a8fa7c0afb54a0581b14a65b56e62b5759dbc98e80627142b8a3704/oauthlib-3.1.0-py2.py3-none-any.whl (147kB)
Collecting cachetools>=2.0.0 (from google-auth>=1.0.1->kubernetes==10.0.1->-r requirements.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/2f/a6/30b0a0bef12283e83e58c1d6e7b5aabc7acfc4110df81a4471655d33e704/cachetools-3.1.1-py2.py3-none-any.whl
Collecting pyasn1-modules>=0.2.1 (from google-auth>=1.0.1->kubernetes==10.0.1->-r requirements.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/be/70/e5ea8afd6d08a4b99ebfc77bd1845248d56cfcf43d11f9dc324b9580a35c/pyasn1_modules-0.2.6-py2.py3-none-any.whl (95kB)
Collecting rsa>=3.1.4 (from google-auth>=1.0.1->kubernetes==10.0.1->-r requirements.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/02/e5/38518af393f7c214357079ce67a317307936896e961e35450b70fad2a9cf/rsa-4.0-py2.py3-none-any.whl
Collecting pyasn1<0.5.0,>=0.4.6 (from pyasn1-modules>=0.2.1->google-auth>=1.0.1->kubernetes==10.0.1->-r requirements.txt (line 8))
  Downloading https://files.pythonhosted.org/packages/a1/71/8f0d444e3a74e5640a3d5d967c1c6b015da9c655f35b2d308a55d907a517/pyasn1-0.4.7-py2.py3-none-any.whl (76kB)
Installing collected packages: Click, itsdangerous, Werkzeug, MarkupSafe, Jinja2, Flask, urllib3, certifi, chardet, idna, requests, oauthlib, requests-oauthlib, six, websocket-client, cachetools, pyasn1, pyasn1-modules, rsa, google-auth, python-dateutil, pyyaml, kubernetes
  Running setup.py install for pyyaml: started
    Running setup.py install for pyyaml: finished with status 'done'
Successfully installed Click-7.0 Flask-1.0.2 Jinja2-2.10 MarkupSafe-1.1.0 Werkzeug-0.15.3 cachetools-3.1.1 certifi-2019.9.11 chardet-3.0.4 google-auth-1.6.3 idna-2.8 itsdangerous-1.1.0 kubernetes-10.0.1 oauthlib-3.1.0 pyasn1-0.4.7 pyasn1-modules-0.2.6 python-dateutil-2.8.0 pyyaml-5.1.2 requests-2.22.0 requests-oauthlib-1.2.0 rsa-4.0 six-1.12.0 urllib3-1.25.5 websocket-client-0.56.0
You are using pip version 10.0.1, however version 19.2.3 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
[36mINFO[0m[0038] Taking snapshot of full filesystem...        
[36mINFO[0m[0043] Using files from context: [/workspace/source] 
[36mINFO[0m[0043] Pushing layer gcr.io/cb-aps-poc-consumer-wb2/cache:881485f5dc35e5b28c1b44c3d1494f7bbbf559ebfac3be20a7f15eb45161a1c3 to cache now 
[36mINFO[0m[0044] COPY . /usr/src/app                          
[36mINFO[0m[0044] Taking snapshot of files...                  
[36mINFO[0m[0044] Using files from context: [/workspace/source/requirements.txt] 
[36mINFO[0m[0044] COPY requirements.txt .                      
[36mINFO[0m[0044] Taking snapshot of files...                  
[36mINFO[0m[0044] ENV PORT 8080                                
[36mINFO[0m[0044] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0044] EXPOSE 8080                                  
[36mINFO[0m[0044] cmd: EXPOSE                                  
[36mINFO[0m[0044] Adding exposed port: 8080/tcp                
[36mINFO[0m[0044] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0044] ENTRYPOINT ["python"]                        
[36mINFO[0m[0044] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0044] CMD ["app.py"]                               
[36mINFO[0m[0044] No files changed in this command, skipping snapshotting. 
2019/09/23 15:34:42 pushed blob: sha256:18f5f2df49969e99cf511c219cd6a693766d9d693fd3a2be80f7c2349f2c4e34
2019/09/23 15:34:43 pushed blob: sha256:8cd4540dc1a458215a19d8bb0cfb51d3fe157265738497992fc0d6c080c35621
2019/09/23 15:34:43 gcr.io/cb-aps-poc-consumer-wb2/cache:881485f5dc35e5b28c1b44c3d1494f7bbbf559ebfac3be20a7f15eb45161a1c3: digest: sha256:09db18012cfae19dbc53bde1188c455fdcc1ee06c8245f35358521910523ad3a size: 429
2019/09/23 15:34:44 existing blob: sha256:f0db43b9b8da254cebc77bf871006df01219e195b9853616b9f708f124a00f3a
2019/09/23 15:34:44 existing blob: sha256:1c7fe136a31e13a1c879245672184ced3b9fc590989ba42a522a57b071a9c1aa
2019/09/23 15:34:44 existing blob: sha256:ece825d3308bbf98f708d95475ccd880497a1e2979ff4ef2534d49049a18488f
2019/09/23 15:34:44 existing blob: sha256:8cd4540dc1a458215a19d8bb0cfb51d3fe157265738497992fc0d6c080c35621
2019/09/23 15:34:44 existing blob: sha256:e2c0fb34dff3a1d32346b92e53fb88a14d1987b402a2348cb379c039687fabe2
2019/09/23 15:34:44 existing blob: sha256:2d21c767035c4593de8bf7ad9781aa83ba110871d1a50871192f4e3480e6f11d
2019/09/23 15:34:44 existing blob: sha256:490280dbcfb772eb5731f059e38fcfacaeb75b4d005af7c249fd51926db2bd62
2019/09/23 15:34:44 existing blob: sha256:e96bc319bce0351d1157092352bc5f85f8800c745388e60e86d06dec99285b45
2019/09/23 15:34:44 existing blob: sha256:06854774e2f35e4763103a446112c67322913a6177bea69eb49663e0166e6d6d
2019/09/23 15:34:44 existing blob: sha256:e10b68fb77e6e91453cd4c1b02e2d77aa23a857cd8eb250617129d074478e1a5
2019/09/23 15:34:45 pushed blob: sha256:6c68e48164fdaa2297171e9b7b21cd6032c4d2a794a15d66bbec14d4e30ac401
2019/09/23 15:34:45 pushed blob: sha256:d3a81b669c0a97430a32dbb1f84934b20f24c6a23b46cbf89579c57afdd47b14
2019/09/23 15:34:46 pushed blob: sha256:0a7b149bd89578195fd66e9f60fc4f323dd3b929e851db6e9ad747dfc6b62e2f
2019/09/23 15:34:46 pushed blob: sha256:e429556ed5e30b78b62d2afa9697a0b7b56033bd791f39564bf23e03aaa7a06f
2019/09/23 15:34:46 gcr.io/cb-aps-poc-consumer-wb2/github-app-auth:0.0.0-SNAPSHOT-PR-3-2: digest: sha256:eb6d208f9496bd1a584c7e4aeb55494ed6b104e8ef92f01314e7ddeea3eccd7c size: 2386

Showing logs for build [32mwarrenbailey-github-app-auth-pr-g77ql-2[0m stage [32mfrom-build-pack[0m and container [32mstep-postbuild-post-build[0m
no CVE provider running in the current ** namespace so skip adding image to be analysed

Showing logs for build [32mwarrenbailey-github-app-auth-pr-g77ql-2[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-make-preview[0m
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-3-2/" Chart.yaml
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-3-2/" ../*/Chart.yaml
sed -i -e "s|repository:.*|repository: gcr.io\/cb-aps-poc-consumer-wb2\/github-app-auth|" values.yaml
sed -i -e "s/tag:.*/tag: 0.0.0-SNAPSHOT-PR-3-2/" values.yaml
echo "  version: 0.0.0-SNAPSHOT-PR-3-2" >> requirements.yaml
** step helm build
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: storage.googleapis.com https://storage.googleapis.com/chartmuseum.jenkins-x.io
Read credentials for https://storage.googleapis.com/chartmuseum.jenkins-x.io from vault helm/repos
Successfully added Helm repository storage.googleapis.com.
Adding missing Helm repo: jenkins-x-chartmuseum http://jenkins-x-chartmuseum:8080
Read credentials for http://jenkins-x-chartmuseum:8080 from vault helm/repos
Successfully added Helm repository jenkins-x-chartmuseum.
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: chartmuseum.jenkins-x.io http://chartmuseum.jenkins-x.io
Read credentials for http://chartmuseum.jenkins-x.io from vault helm/repos
Successfully added Helm repository chartmuseum.jenkins-x.io.

Showing logs for build [32mwarrenbailey-github-app-auth-pr-g77ql-2[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-jx-preview[0m
Creating a preview
Commit author email is empty for: fe085dfb75ffdb8a8a8906ab079ae3b077477b8d
Looking for commits in: /workspace/source/
error: unable to parse requirement: invalid label value: "dependabot[bot]": a valid label must be an empty string or consist of alphanumeric characters, '-', '_' or '.', and must start and end with an alphanumeric character (e.g. 'MyValue',  or 'my_value',  or '12345', regex used for validation is '(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?')
[31m
Pipeline failed on stage 'from-build-pack' : container 'step-promote-jx-preview'. The execution of the pipeline has stopped.[0m
